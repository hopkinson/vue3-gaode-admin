(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6247c963"],{"1edd":function(t,e,a){},"2ba0":function(t,e,a){},3375:function(t,e,a){"use strict";var r=a("2ba0");a.n(r).a},5108:function(t,e,a){"use strict";a.r(e),a("96cf");var r=a("89ba"),n=a("9f12"),o=a("53fe"),i=a("8b83"),c=a("c65a"),s=a("c03e"),l=a("9ab4"),u=a("60a3"),d=(a("9911"),a("828b")),f=function(t){function e(){var t;return Object(n.a)(this,e),(t=Object(i.a)(this,Object(c.a)(e).apply(this,arguments))).dialogChooseProduct=!1,t.chosedProduct=[],t}var a,l;return Object(s.a)(e,t),Object(o.a)(e,[{key:"handleCopyLink",value:function(){var t=this;this.$copyText(this.data.link).then((function(e){t.$notify.success({title:"提示",message:"复制成功"})}),(function(e){t.$notify.error({title:"提示",message:"复制失败"})}))}},{key:"handleGoTicket",value:function(){this.$emit("go-ticket",this.data)}},{key:"handleShowProduct",value:(l=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.dialogChooseProduct=!0;case 1:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"watchValue",value:(a=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e)return t.next=3,this.fetchSubjectGoods();t.next=4;break;case 3:this.chosedProduct=t.sent;case 4:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"productTip",get:function(){return"已选择".concat(this.chosedProduct.length,"件商品")}}]),e}(u.h);l.a([Object(u.e)({type:Object,default:function(){}})],f.prototype,"data",void 0),l.a([Object(u.e)({type:Function,default:function(){return{}}})],f.prototype,"fetchSubjectGoods",void 0),l.a([Object(u.i)("data",{deep:!0})],f.prototype,"watchValue",null);var h=f=l.a([Object(u.a)({name:"GridDetail",components:{TableProduct:d.a}})],f),p=(a("3375"),a("2877")),b=Object(p.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{attrs:{"label-position":"left",inline:"",size:"small"}},[t._v(" "+t._s(t.data)+" "),a("el-form-item",{attrs:{label:"类型"}},[t._v(t._s(t.data.typeName))]),a("el-form-item",{attrs:{label:"图片"}},[a("el-image",{staticClass:"global__img--default",attrs:{fit:"scale-down","preview-src-list":[t.data.coverImage],src:t.data.coverImage}},[a("i",{staticClass:"el-icon-picture-outline",attrs:{slot:"error"},slot:"error"})])],1),a("el-form-item",{attrs:{label:"名称"}},[t._v(t._s(t.data.name))]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品"}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleShowProduct(t.data.id)}}},[a("span",[t._v("共选择")]),a("span",{staticClass:"grid__money"},[t._v(t._s(t.chosedProduct.length))]),a("span",[t._v("件商品")])])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"卡券"}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleGoTicket(t.data.cardSubjectId)}}},[t._v(" "+t._s(t.data.cardSubjectName)+"("+t._s(t._f("formatMoney")(t.data.cardSubjectValue))+") ")])],1)],1)],1),a("el-form-item",{attrs:{label:"二维码"}},[a("div",[t._v("扫描二维码可兑换本专题商品")]),a("el-image",{staticClass:"grid__qrcode",attrs:{src:t.data.qrcode}})],1),a("el-form-item",{attrs:{label:"分享链接"}},[a("a",{staticClass:"grid__link",attrs:{href:t.data.link}},[t._v(t._s(t.data.link))]),a("el-button",{attrs:{icon:"el-icon-document-copy",size:"mini"},on:{click:t.handleCopyLink}},[t._v("复制链接")])],1),a("el-form-item",{attrs:{label:"描述"}},[a("div",{domProps:{innerHTML:t._s(t.data.description)}})])],1),a("slw-dialog",{attrs:{width:"90%",title:"已选择的商品"},model:{value:t.dialogChooseProduct,callback:function(e){t.dialogChooseProduct=e},expression:"dialogChooseProduct"}},[a("table-product",{ref:"product",attrs:{"disabled-load":"",data:t.chosedProduct,"only-view":""}},[a("el-alert",{attrs:{type:"warning",closable:!1,title:t.productTip}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogChooseProduct=!1}}},[t._v(" 关闭")])],1)],1)],1)}),[],!1,null,"de6ce2c8",null).exports,v=a("60a6"),m=a("d257"),g=function(t){function e(){var t;return Object(n.a)(this,e),(t=Object(i.a)(this,Object(c.a)(e).apply(this,arguments))).detail={},t.loading=!1,t}var a,l;return Object(s.a)(e,t),Object(o.a)(e,[{key:"created",value:(l=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$route.params.id)return this.loading=!0,t.next=5,this.$ajax.ajax({method:"GET",url:"v1/subjects/".concat(e)});t.next=7;break;case 5:this.detail=t.sent,this.loading=!1;case 7:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"handleGoTicket",value:function(t){var e=t.cardSubjectId;this.$router.push({path:"/ticket/detail/".concat(e)})}},{key:"fetchSubjectGoods",value:(a=Object(r.a)(regeneratorRuntime.mark((function t(){var e,a,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$route.params.id,t.next=3,this.$ajax.ajax({method:"GET",url:"v1/subjects/".concat(e,"/goods")});case 3:return a=t.sent,t.next=6,this.$ajax.ajax({method:"GET",url:"v1/goods",query:{pageSize:999}});case 6:return r=t.sent,n=r.records,t.abrupt("return",Object(m.b)(n,a,"id","goodsId"));case 9:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})}]),e}(u.h),j=g=l.a([Object(u.a)({components:{GridDetail:b,LayoutDetail:v.a},name:"TicketDetail"})],g),k=Object(p.a)(j,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout-detail",[a("grid-detail",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.detail,fetchSubjectGoods:t.fetchSubjectGoods},on:{"go-ticket":t.handleGoTicket}})],1)}),[],!1,null,null,null);e.default=k.exports},"60a6":function(t,e,a){"use strict";var r=a("9f12"),n=a("8b83"),o=a("c65a"),i=a("c03e"),c=a("9ab4"),s=a("60a3"),l=function(t){function e(){return Object(r.a)(this,e),Object(n.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(i.a)(e,t),e}(s.h);c.a([Object(s.e)({default:!0})],l.prototype,"showFooter",void 0);var u=l=c.a([Object(s.a)({name:"LayoutDetail"})],l),d=(a("9dc2"),a("2877")),f=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-detail"},[a("div",{staticClass:"layout-detail__container"},[t._t("default"),t.showFooter?a("el-button",{staticClass:"global__block--horizontal-center",attrs:{round:""},on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"el-icon-back"}),t._v(" 返回 ")]):t._e()],2)])}),[],!1,null,null,null);e.a=f.exports},"857a":function(t,e,a){var r=a("1d80"),n=/"/g;t.exports=function(t,e,a,o){var i=String(r(t)),c="<"+e;return""!==a&&(c+=" "+a+'="'+String(o).replace(n,"&quot;")+'"'),c+">"+i+"</"+e+">"}},9911:function(t,e,a){"use strict";var r=a("23e7"),n=a("857a");r({target:"String",proto:!0,forced:a("eae9")("link")},{link:function(t){return n(this,"a","href",t)}})},"9dc2":function(t,e,a){"use strict";var r=a("1edd");a.n(r).a},eae9:function(t,e,a){var r=a("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}))}}}]);