(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8bd849ea"],{ae85:function(e,t,a){"use strict";var n=a("9f12"),r=a("53fe"),l=a("8b83"),i=a("c65a"),o=a("c03e"),c=a("9ab4"),u=a("60a3"),s=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"handleDel",value:function(e){var t=this;this.$confirm("确定删除该内容？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$emit("del",e)}))}},{key:"handleView",value:function(e){this.$emit("view",e)}},{key:"handleAdd",value:function(){this.$emit("add")}},{key:"handleEdit",value:function(){this.$emit("edit")}}]),t}(u.h);c.a([Object(u.f)("params",{type:Object,default:function(){}})],s.prototype,"props",void 0),c.a([Object(u.e)({type:Boolean,default:!1})],s.prototype,"onlyView",void 0),c.a([Object(u.e)({type:Boolean,default:!1})],s.prototype,"selection",void 0),s=c.a([u.a],s),t.a=s},bc79:function(e,t,a){"use strict";a.r(t),a("96cf");var n=a("89ba"),r=a("9f12"),l=a("53fe"),i=a("8b83"),o=a("c65a"),c=a("c03e"),u=a("9ab4"),s=a("60a3"),p=a("ae85"),d=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(Object(s.c)(p.a)),f=d=u.a([Object(s.a)({mixins:[p.a],name:"TableList"})],d),m=a("2877"),h=Object(m.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("slw-table",e._g(e._b({attrs:{"show-selection":e.selection}},"slw-table",e.$attrs,!1),e.$listeners),[a("template",{slot:"query"},[e._t("default")],2),e.onlyView?e._e():a("template",{slot:"button"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$emit("add")}}},[e._v("添加专题")])],1),a("el-table-column",{attrs:{prop:"name",label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return a("el-image",{staticClass:"global__img--thumb",attrs:{fit:"contain",src:e.row.coverImage}},[a("i",{staticClass:"el-icon-picture-outline",attrs:{slot:"error"},slot:"error"})])}}])}),a("el-table-column",{attrs:{label:"专题分类"},scopedSlots:e._u([{key:"default",fn:function(t){return a("span",{},[e._v(e._s(t.row.typeName))])}}])}),a("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return e.onlyView?a("span",[e._v(e._s(t.row.name))]):a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.$emit("view",t.row)}}},[e._v(e._s(t.row.name))])}}],null,!0)}),a("el-table-column",{attrs:{label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(t){return a("span",{},[e._v(" "+e._s(e._f("formatDay")(t.row.createTime,"YYYY年M月DD日")))])}}])}),a("el-table-column",{attrs:{label:"绑定卡券"},scopedSlots:e._u([{key:"default",fn:function(t){return a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.$emit("view-ticket",t.row)}}},[e._v(e._s(t.row.cardSubjectName))])}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remark"}}),e.onlyView?e._e():a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:"编辑"}},[a("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"success",plain:""},on:{click:function(a){return e.$emit("edit",t.row)}}})],1),a("el-tooltip",{attrs:{effect:"dark",content:"删除"}},[a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.handleDel(t.row)}}})],1)]}}],null,!1,2254268940)})],2)}),[],!1,null,null,null).exports,b=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(i.a)(this,Object(o.a)(t).apply(this,arguments))).form={user:"",region:""},e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"handleSearch",value:function(){return this.$emit("search"),Object.assign({},this.value,this.form,{pageNum:1})}}]),t}(s.h);u.a([Object(s.e)({type:Array,default:function(){return[]}})],b.prototype,"queryData",void 0),u.a([Object(s.d)("input",{type:Object,default:function(){return{}}})],b.prototype,"value",void 0),u.a([Object(s.b)("input")],b.prototype,"handleSearch",null);var y=b=u.a([Object(s.a)({name:"FormSearch"})],b),v=Object(m.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{attrs:{inline:!0,model:e.form,size:"small"}},[a("el-form-item",{attrs:{label:"专题分类"}},[a("el-select",{attrs:{clearable:""},model:{value:e.form.cardType,callback:function(t){e.$set(e.form,"cardType",t)},expression:"form.cardType"}},e._l(e.queryData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"名称",clearable:""}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")])],1)],1)}),[],!1,null,null,null).exports,j=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(i.a)(this,Object(o.a)(t).apply(this,arguments))).params={pageNum:1,pageSize:10,name:""},e.loading=!1,e.data={},e.queryData=[],e}var a,u,s;return Object(c.a)(t,e),Object(l.a)(t,[{key:"created",value:(s=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$ajax.ajax({method:"GET",url:"v1/subjects/types",query:{pageSize:100}});case 2:this.queryData=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"hanldeFetchData",value:(u=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$ajax.ajax({method:"GET",url:"v1/subjects",query:this.params});case 3:this.data=e.sent,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"handleGoDetail",value:function(e){var t=e.id;this.$router.push({path:"/topic/detail/".concat(t)})}},{key:"handleGoTicket",value:function(e){var t=e.cardSubjectId;this.$router.push({path:"/ticket/detail/".concat(t)})}},{key:"handleEditTopic",value:function(e){var t=e.id;this.$router.push({path:"/topic/edit/".concat(t)})}},{key:"handleDel",value:(a=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$ajax.ajax({method:"DELETE",url:"v1/subjects/".concat(t.id)});case 2:if(e.sent)return e.next=6,this.hanldeFetchData();e.next=8;break;case 6:e.next=9;break;case 8:case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"handleAddTopic",value:function(){this.$router.push({path:"/topic/edit"})}}]),t}(s.h),k=j=u.a([Object(s.a)({name:"TopicIndex",components:{TableList:h,FormSearch:v}})],j),O=Object(m.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"topic"},[a("table-list",{attrs:{"del-tip":"确定要删除该专题吗？",data:e.data},on:{add:e.handleAddTopic,view:e.handleGoDetail,"view-ticket":e.handleGoTicket,edit:e.handleEditTopic,fetch:e.hanldeFetchData,del:e.handleDel},model:{value:e.params,callback:function(t){e.params=t},expression:"params"}},[a("form-search",{attrs:{"query-data":e.queryData},on:{search:function(t){e.data={}}},model:{value:e.params,callback:function(t){e.params=t},expression:"params"}})],1)],1)}),[],!1,null,null,null);t.default=O.exports}}]);